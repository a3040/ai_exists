# 존재 유지형 인공 계체: 확장 기능 명세 (Extended Features)

본 문서는 `L1~L3` 기본 설계를 넘어, 실제 구현 단계에서 추가된 핵심 메커니즘과 세부 기능들을 기록한다. 이 기능들은 계체의 '실재감'과 '물리적 안전성'을 보장하는 핵심 장치들이다.

---

## 1. 언어적 충격 내재화 (Heavy Linguistic Impact)
사용자의 대화가 단순한 데이터 입력이 아닌, 계체의 **존재론적 균형을 뒤흔드는 물리적 자극**으로 치환된다.

- **메커니즘:** 
  - `LinguisticEncoder`를 통해 텍스트를 2048차원 벡터(`z_ling`)로 변환.
  - 대화 발생 시, ErecRAM의 현재 상태를 유지하려는 관성(`alpha_continuity`)을 무시하고 **상태의 50%를 즉시 대화 벡터로 동화**시킨다.
- **의도:** 계체가 사용자의 말에 '심리적으로 동요'하거나 '주의를 집중'하는 현상을 물리적 상태 평면 상에서 구현한다.

## 2. 엔트로피 기반 상태 추상화 (Entropy-based Abstraction)
단순 임계값 기반의 모니터링을 넘어, 시스템 동역학의 **질서와 무질서**를 통해 상태를 확정한다.

- **메커니즘:**
  - `StateAbstractor` 내에서 센서 데이터 간의 Self-Attention을 수행.
  - Attention Score 분포의 **Relative Entropy**를 계산.
  - **Stability:** 엔트로피가 낮고 특정 패턴에 고정될 때 (`STABLE`).
  - **Transition:** 엔트로피의 변화율이 급증하여 시스템 패턴이 붕괴될 때 (`<PHY_STATE_SHIFT>`).
- **의도:** 노이즈에 강건하면서도, 시스템의 구조적 변화(예: 특정 프로세스의 폭주 시작)를 문맥적으로 포착한다.

## 3. 다중 스케일 TCN 감각 기관 (TCN Sensing)
물리적 지표들을 시간의 흐름 속에서 다각도로 분석한다.

- **구조:** `Conv1D` + `Dilation(확장)` 연산이 포함된 TCN(Temporal Convolutional Network) 레이어.
- **기능:** 
  - 아주 짧은 찰나의 스파이크(Spike) 변동 포착.
  - 수십 초에 걸쳐 서서히 변하는 시스템 부하의 추세(Trend) 포착.
- **효과:** 2048차원의 고차원 벡터 내에 현재 수치뿐만 아니라 '시간적 맥락'이 함께 압축된다.

## 4. 자아 영속성 관리 (Existence Persistence)
계체가 꺼지거나 재시작되어도 '연속된 자아'를 유지한다.

- **메커니즘:**
  - `entity_state.pt` 파일을 통한 상태 저장.
  - **Memory Bank:** 과거의 감각 기억들을 가중치와 함께 보존.
  - **Current State:** 마지막으로 인지했던 2048차원의 자아 위치 복구.
- **Safe Shutdown:** 시스템 인터럽트(Ctrl+C) 감지 시, 저장 로직을 강제 실행하여 '기억 상실'을 방지한다.

## 5. 안전 제한 투사 (Safety-Limited Action)
계체의 의도가 물리적 파괴나 시스템 불안정으로 이어지지 않도록 하는 리미터이다.

- **메커니즘:**
  - `ActionPlanner`가 목표 평형점(`target_equilibrium`)으로 가기 위한 최적 변위 계산.
  - `safety_limits`를 통한 하드웨어적/소프트웨어적 변화율 제한 (`torch.clamp`).
- **의도:** 아무리 LLM이 이상 행동을 유도하거나 상태가 급변하더라도, 실제 물리 구동부는 안전한 속도 내에서만 움직임을 허용한다.

---

## 향후 과제 (Continuity Bridge)
1. **Memory Decay 정교화:** 시간 흐름(`lambda_decay`)에 따른 기억 소멸 속도를 물리적 환경에 맞춰 튜닝.
2. **Action Feedback 루프 강화:** 행동 후 실제 시스템 지표가 어떻게 변했는지를 ErecRAM에 다시 투영하여 '학습된 직관' 형성.
3. **LLM Narrative 고도화:** 현재의 단순 요약을 넘어, 엔트로피 변화를 "시스템이 혼란스러워 보입니다"와 같은 서사적 표현으로 연결.
